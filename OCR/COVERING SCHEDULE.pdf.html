<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>OCR Results Viewer</title>
            <style>
                
                :root {
                    --bg-primary: #0f172a;
                    --bg-secondary: #1e293b;
                    --bg-tertiary: #334155;
                    --text-primary: #f1f5f9;
                    --text-secondary: #cbd5e1;
                    --accent: #3b82f6;
                    --accent-hover: #2563eb;
                    --success: #10b981;
                    --warning: #f59e0b;
                    --danger: #ef4444;
                    --border: #334155;
                }
                
                [data-theme="light"] {
                    --bg-primary: #f8fafc;
                    --bg-secondary: #ffffff;
                    --bg-tertiary: #f1f5f9;
                    --text-primary: #1e293b;
                    --text-secondary: #64748b;
                    --border: #e2e8f0;
                }
            

                * {
                    box-sizing: border-box;
                }
                
                body {
                    margin: 0;
                    background: var(--bg-primary);
                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    color: var(--text-primary);
                    line-height: 1.6;
                    transition: background 0.3s, color 0.3s;
                    overflow-x: hidden;
                }
                
                .main-container {
                    display: flex;
                    height: 100vh;
                }
                
                .thumbnail-sidebar {
                    width: 160px;
                    background: var(--bg-secondary);
                    overflow-y: auto;
                    border-right: 1px solid var(--border);
                    padding: 10px;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                
                .thumbnail {
                    cursor: pointer;
                    border: 2px solid transparent;
                    border-radius: 6px;
                    overflow: hidden;
                    transition: all 0.2s;
                    background: var(--bg-tertiary);
                }
                
                .thumbnail:hover {
                    border-color: var(--accent);
                    transform: translateY(-2px);
                }
                
                .thumbnail.active {
                    border-color: var(--accent);
                    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
                }
                
                .thumbnail img {
                    width: 100%;
                    height: auto;
                    display: block;
                }
                
                .thumbnail-label {
                    padding: 6px;
                    text-align: center;
                    font-size: 12px;
                    font-weight: 500;
                    color: var(--text-secondary);
                }
                
                .content-container {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    overflow: hidden;
                }
            

                .progress-container {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 4px;
                    background: var(--bg-primary);
                    z-index: 3000;
                    display: none;
                }
                
                .progress-bar {
                    height: 100%;
                    background: var(--accent);
                    width: 0%;
                    transition: width 0.3s;
                }
                
                .progress-text {
                    position: absolute;
                    top: 5px;
                    right: 10px;
                    font-size: 12px;
                    color: var(--text-primary);
                    background: var(--bg-secondary);
                    padding: 2px 8px;
                    border-radius: 10px;
                }
            

                .toolbar {
                    background: var(--bg-secondary);
                    border-bottom: 1px solid var(--border);
                    position: sticky;
                    top: 0;
                    z-index: 1000;
                    transition: background 0.3s, border-color 0.3s;
                }
                
                .toolbar-row {
                    padding: 12px 20px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .toolbar-row:first-child {
                    border-bottom: 1px solid var(--border);
                }
                
                .toolbar-left, .toolbar-right {
                    display: flex;
                    align-items: center;
                    gap: 12px 24px;
                }
                
                .toolbar-group {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    background: var(--bg-tertiary);
                    border-radius: 8px;
                    border: 1px solid transparent;
                    transition: all 0.2s;
                }
                
                .toolbar-group:hover {
                    border-color: var(--accent);
                }
            

                .toolbar label {
                    font-weight: 500;
                    color: var(--text-secondary);
                    font-size: 13px;
                    white-space: nowrap;
                }
                
                .toolbar input[type="range"] {
                    width: 120px;
                    height: 5px;
                    background: var(--bg-primary);
                    border-radius: 3px;
                    outline: none;
                    -webkit-appearance: none;
                }
                
                .toolbar input[type="range"]::-webkit-slider-thumb {
                    -webkit-appearance: none;
                    width: 16px;
                    height: 16px;
                    background: var(--accent);
                    border-radius: 50%;
                    cursor: pointer;
                    transition: all 0.2s;
                }
                
                .toolbar input[type="range"]::-webkit-slider-thumb:hover {
                    background: var(--accent-hover);
                    transform: scale(1.1);
                }
                
                .toolbar input[type="text"] {
                    padding: 8px 12px;
                    background: var(--bg-primary);
                    border: 1px solid var(--border);
                    border-radius: 6px;
                    color: var(--text-primary);
                    font-size: 13px;
                    width: 180px;
                    transition: all 0.2s;
                }
                
                .toolbar input[type="text"]:focus {
                    outline: none;
                    border-color: var(--accent);
                }
                
                .toolbar button {
                    padding: 8px 14px;
                    background: var(--accent);
                    color: white;
                    border: none;
                    border-radius: 6px;
                    font-weight: 500;
                    font-size: 13px;
                    cursor: pointer;
                    transition: all 0.2s;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }
                
                .toolbar button:hover {
                    background: var(--accent-hover);
                }
                
                .toolbar button:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
            

                .pages-wrapper {
                    padding: 40px 20px;
                    display: flex;
                    flex-direction: column;
                    gap: 40px;
                    overflow-x: hidden;
                    overflow-y: auto;
                    align-items: center;
                    min-height: calc(100vh - 140px);
                    flex: 1;
                }
                
                .pages-wrapper::-webkit-scrollbar {
                    width: 12px;
                }
                
                .pages-wrapper::-webkit-scrollbar-track {
                    background: var(--bg-tertiary);
                    border-radius: 6px;
                }
                
                .pages-wrapper::-webkit-scrollbar-thumb {
                    background: var(--accent);
                    border-radius: 6px;
                }
                
                .pages-wrapper::-webkit-scrollbar-thumb:hover {
                    background: var(--accent-hover);
                }
                
                .page-container {
                    position: relative;
                    background: white;
                    border-radius: 8px;
                    overflow: hidden;
                    transition: transform 0.2s;
                    flex-shrink: 0;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                    max-width: 100%;
                    width: fit-content;
                    min-height: 200px;
                }
                
                .lazy-page {
                    min-height: 300px;
                }
                
                .page-placeholder {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    height: 300px;
                    background: var(--bg-tertiary);
                    color: var(--text-secondary);
                    font-weight: 500;
                }
                
                .ocr-image {
                    display: block;
                    width: auto;
                    max-width: none;
                    height: auto;
                }
            

                .ocr-line {
                    position: absolute;
                    pointer-events: auto;
                    cursor: pointer;
                    transition: all 0.2s;
                }
                
                .ocr-line:hover {
                    z-index: 10;
                }
                
                .ocr-line.selected {
                    outline: 2px solid var(--accent);
                    outline-offset: 2px;
                }
                
                .underline {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    height: 3px;
                    opacity: 0.9;
                    transition: all 0.2s;
                }
                
                .ocr-line[data-edited="true"] .underline {
                    background-color: var(--warning) !important;
                    height: 4px;
                }
                
                .ocr-tooltip {
                    visibility: hidden;
                    position: absolute;
                    bottom: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(30, 41, 59, 0.95);
                    color: var(--text-primary);
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 13px;
                    white-space: nowrap;
                    opacity: 0;
                    transition: opacity 0.2s, transform 0.2s;
                    backdrop-filter: blur(10px);
                    border: 1px solid var(--border);
                    margin-bottom: 8px;
                }
                
                .ocr-tooltip::after {
                    content: '';
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    border-width: 6px;
                    border-style: solid;
                    border-color: rgba(30, 41, 59, 0.95) transparent transparent transparent;
                }
                
                .ocr-line:hover .ocr-tooltip {
                    visibility: visible;
                    opacity: 1;
                    transform: translateX(-50%) translateY(-4px);
                }
            

                .modal {
                    display: none;
                    position: fixed;
                    z-index: 2000;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(15, 23, 42, 0.8);
                    backdrop-filter: blur(4px);
                    animation: fadeIn 0.2s;
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                .modal-content {
                    background-color: var(--bg-secondary);
                    margin: 10% auto;
                    padding: 24px;
                    border: 1px solid var(--border);
                    width: 50%;
                    max-width: 600px;
                    border-radius: 12px;
                    animation: slideIn 0.3s;
                    transition: background 0.3s, border-color 0.3s;
                }
                
                @keyframes slideIn {
                    from { transform: translateY(-20px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                
                .modal h3 {
                    margin-top: 0;
                    font-size: 18px;
                    font-weight: 600;
                    color: var(--text-primary);
                }
                
                .modal-buttons {
                    display: flex;
                    justify-content: flex-end;
                    gap: 12px;
                    margin-top: 20px;
                }
                
                .modal textarea {
                    width: 100%;
                    min-height: 120px;
                    background: var(--bg-tertiary);
                    color: var(--text-primary);
                    border: 1px solid var(--border);
                    padding: 12px;
                    border-radius: 6px;
                    font-family: inherit;
                    font-size: 14px;
                    resize: vertical;
                    transition: all 0.2s;
                }
                
                .modal textarea:focus {
                    outline: none;
                    border-color: var(--accent);
                }
                
                .modal button {
                    padding: 8px 16px;
                    border-radius: 6px;
                    font-weight: 500;
                    font-size: 14px;
                    cursor: pointer;
                    transition: all 0.2s;
                }
                
                .modal button:first-of-type {
                    background: var(--bg-tertiary);
                    color: var(--text-primary);
                    border: 1px solid var(--border);
                }
                
                .modal button:first-of-type:hover {
                    background: var(--border);
                }
                
                .modal button:last-of-type {
                    background: var(--accent);
                    color: white;
                    border: none;
                }
                
                .modal button:last-of-type:hover {
                    background: var(--accent-hover);
                }
            

                .drawing-box {
                    position: absolute;
                    border: 2px dashed var(--accent);
                    background: rgba(59, 130, 246, 0.1);
                    pointer-events: none;
                    display: none;
                    border-radius: 4px;
                }
                
                .edited-badge {
                    position: absolute;
                    top: -10px;
                    right: -10px;
                    background: var(--warning);
                    color: var(--bg-primary);
                    font-size: 10px;
                    font-weight: 700;
                    padding: 3px 6px;
                    border-radius: 4px;
                    display: none;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                }
                
                .ocr-line[data-edited="true"] .edited-badge {
                    display: block;
                }
                
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 16px;
                    margin-top: 16px;
                }
                
                .stat-card {
                    background: var(--bg-tertiary);
                    padding: 16px;
                    border-radius: 8px;
                    border: 1px solid var(--border);
                }
                
                .stat-label {
                    font-size: 14px;
                    color: var(--text-secondary);
                    margin-bottom: 4px;
                }
                
                .stat-value {
                    font-size: 24px;
                    font-weight: 600;
                    color: var(--text-primary);
                }
                
                .export-options {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                    margin-top: 16px;
                }
                
                .export-option {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 12px;
                    background: var(--bg-tertiary);
                    border-radius: 8px;
                    border: 1px solid var(--border);
                    cursor: pointer;
                    transition: all 0.2s;
                }
                
                .export-option:hover {
                    border-color: var(--accent);
                }
                
                .export-option input[type="radio"] {
                    margin: 0;
                }
                
                .export-option label {
                    flex: 1;
                    cursor: pointer;
                    margin: 0;
                    font-weight: 500;
                }
                
                /* Collapsible toolbar styles */
                #toolbarSecondRow {
                    transition: all 0.3s ease;
                    overflow: hidden;
                }
                
                #toolbarSecondRow.collapsed {
                    max-height: 0;
                    padding: 0;
                    border: none;
                }
                
                .collapse-btn {
                    background: transparent !important;
                    padding: 6px !important;
                    border: 1px solid var(--border) !important;
                    border-radius: 4px !important;
                }
                
                .collapse-btn:hover {
                    background: var(--bg-tertiary) !important;
                }
                
                .toolbar-icon {
                    width: 16px;
                    height: 16px;
                }
                
                .threshold-value {
                    background: var(--bg-primary);
                    padding: 4px 8px;
                    border-radius: 4px;
                    font-weight: 600;
                    color: var(--accent);
                    min-width: 40px;
                    text-align: center;
                    font-size: 13px;
                }
            
            </style>
        </head>
        <body>
            <div id="progressBar" class="progress-container">
                <div id="progressFill" class="progress-bar"></div>
                <div id="progressText" class="progress-text">0%</div>
            </div>
            
            <div class="main-container">
                <div class="content-container">
                    <div class="toolbar">
                        <!-- First Row: Main Controls -->
                        <div class="toolbar-row">
                            <div class="toolbar-left">
                                <div class="toolbar-group">
                                    <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg>
                                    <label>OCR Viewer</label>
                                </div>
                                
                                <div class="toolbar-group">
                                    <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="18" y1="20" x2="18" y2="10"></line>
                                        <line x1="12" y1="20" x2="12" y2="4"></line>
                                        <line x1="6" y1="20" x2="6" y2="14"></line>
                                    </svg>
                                    <label>Confidence:</label>
                                    <input type="range" min="0" max="1" step="0.01" value="0.9" id="thresholdSlider">
                                    <span class="threshold-value" id="thresholdVal">0.9</span>
                                </div>
                                
                                <div class="toolbar-group">
                                    <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                    </svg>
                                    <input type="text" id="textFilter" placeholder="Search text...">
                                </div>
                            </div>
                            
                            <div class="toolbar-right">
                                <div class="toolbar-group">
                                    <button id="addTextBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Add Text
                                    </button>
                                    <button id="saveBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
                                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                            <polyline points="7 3 7 8 15 8"></polyline>
                                        </svg>
                                        Save
                                    </button>
                                    <button id="collapseBtn" class="collapse-btn" title="Toggle Toolbar">
                                        <svg class="toolbar-icon" id="collapseIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="18 15 12 9 6 15"></polyline>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Second Row: Additional Controls -->
                        <div class="toolbar-row" id="toolbarSecondRow">
                            <div class="toolbar-left">
                                <div class="toolbar-group">
                                    <button id="undoBtn" disabled>
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M3 7v6h6"></path>
                                            <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"></path>
                                        </svg>
                                    </button>
                                    <button id="redoBtn" disabled>
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 7v6h-6"></path>
                                            <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <div class="toolbar-group">
                                    <button id="zoomOutBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                            <line x1="8" y1="11" x2="14" y2="11"></line>
                                        </svg>
                                    </button>
                                    <span id="zoomLevel">100%</span>
                                    <button id="zoomInBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                            <line x1="11" y1="8" x2="11" y2="14"></line>
                                            <line x1="8" y1="11" x2="14" y2="11"></line>
                                        </svg>
                                    </button>
                                    <button id="zoomResetBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="1 4 1 10 7 10"></polyline>
                                            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="toolbar-right">
                                <div class="toolbar-group">
                                    <button id="themeToggle">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="5"></circle>
                                            <line x1="12" y1="1" x2="12" y2="3"></line>
                                            <line x1="12" y1="21" x2="12" y2="23"></line>
                                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                            <line x1="1" y1="12" x2="3" y2="12"></line>
                                            <line x1="21" y1="12" x2="23" y2="12"></line>
                                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                        </svg>
                                    </button>
                                </div>
                                
                                <div class="toolbar-group">
                                    <button id="statsBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="18" y1="20" x2="18" y2="10"></line>
                                            <line x1="12" y1="20" x2="12" y2="4"></line>
                                            <line x1="6" y1="20" x2="6" y2="14"></line>
                                        </svg>
                                        Stats
                                    </button>
                                </div>
                                
                                <div class="toolbar-group">
                                    <button id="exportBtn">
                                        <svg class="toolbar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        Export
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pages-wrapper" id="pagesWrapper">
                        
            <div class="page-container" id="page-0">
                <img class="ocr-image" src="res\2\0.png" alt="Page 0" />
                
        <div class="ocr-line" data-score="0.8162693381309509" data-text="d4 728 3016 304"
             data-original-text="D4 728 3016 304" data-index="0" data-page="0"
             data-edited="false" style="left:500px;top:24px;width:302px;height:56px;">
            <div class="underline" style="background-color:rgb(46,208,100);"></div>
            <div class="ocr-tooltip">D4 728 3016 304 (Confidence: 81.63%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9926581382751465" data-text="bank austria"
             data-original-text="Bank Austria" data-index="1" data-page="0"
             data-edited="false" style="left:223px;top:71px;width:256px;height:55px;">
            <div class="underline" style="background-color:rgb(1,253,100);"></div>
            <div class="ocr-tooltip">Bank Austria (Confidence: 99.27%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9895092844963074" data-text="unicredit group"
             data-original-text="UniCredit Group" data-index="2" data-page="0"
             data-edited="false" style="left:230px;top:119px;width:131px;height:31px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">UniCredit Group (Confidence: 98.95%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8914796710014343" data-text="member of unicredit group"
             data-original-text="Member of UniCredit Group" data-index="3" data-page="0"
             data-edited="false" style="left:809px;top:111px;width:254px;height:33px;">
            <div class="underline" style="background-color:rgb(27,227,100);"></div>
            <div class="ocr-tooltip">Member of UniCredit Group (Confidence: 89.15%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9381604790687561" data-text="from postfach 35000. a-1011 vienna"
             data-original-text="From Postfach 35000. A-1011 Vienna" data-index="4" data-page="0"
             data-edited="false" style="left:182px;top:251px;width:258px;height:14px;">
            <div class="underline" style="background-color:rgb(15,239,100);"></div>
            <div class="ocr-tooltip">From Postfach 35000. A-1011 Vienna (Confidence: 93.82%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.965848445892334" data-text="by dhl"
             data-original-text="by DHL" data-index="5" data-page="0"
             data-edited="false" style="left:178px;top:285px;width:75px;height:21px;">
            <div class="underline" style="background-color:rgb(8,246,100);"></div>
            <div class="ocr-tooltip">by DHL (Confidence: 96.58%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9769287109375" data-text="trade finance sales austria"
             data-original-text="Trade Finance Sales Austria" data-index="6" data-page="0"
             data-edited="false" style="left:637px;top:286px;width:308px;height:17px;">
            <div class="underline" style="background-color:rgb(5,249,100);"></div>
            <div class="ocr-tooltip">Trade Finance Sales Austria (Confidence: 97.69%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9668572545051575" data-text="rothschildplatz 1"
             data-original-text="Rothschildplatz 1" data-index="7" data-page="0"
             data-edited="false" style="left:636px;top:305px;width:195px;height:17px;">
            <div class="underline" style="background-color:rgb(8,246,100);"></div>
            <div class="ocr-tooltip">Rothschildplatz 1 (Confidence: 96.69%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9423593282699585" data-text="united bank ltd."
             data-original-text="UNITED BANK LTD." data-index="8" data-page="0"
             data-edited="false" style="left:180px;top:332px;width:191px;height:16px;">
            <div class="underline" style="background-color:rgb(14,240,100);"></div>
            <div class="ocr-tooltip">UNITED BANK LTD. (Confidence: 94.24%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9768161773681641" data-text="a-1020 vienna"
             data-original-text="A-1020 Vienna" data-index="9" data-page="0"
             data-edited="false" style="left:635px;top:323px;width:151px;height:17px;">
            <div class="underline" style="background-color:rgb(5,249,100);"></div>
            <div class="ocr-tooltip">A-1020 Vienna (Confidence: 97.68%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9179040789604187" data-text="cpu (trade) 2nd fl.,printing and"
             data-original-text="CPU (TRADE) 2ND FL.,PRINTING AND" data-index="10" data-page="0"
             data-edited="false" style="left:180px;top:347px;width:368px;height:20px;">
            <div class="underline" style="background-color:rgb(20,234,100);"></div>
            <div class="ocr-tooltip">CPU (TRADE) 2ND FL.,PRINTING AND (Confidence: 91.79%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9640726447105408" data-text="birgit hirschler"
             data-original-text="Birgit Hirschler" data-index="11" data-page="0"
             data-edited="false" style="left:635px;top:342px;width:185px;height:16px;">
            <div class="underline" style="background-color:rgb(9,245,100);"></div>
            <div class="ocr-tooltip">Birgit Hirschler (Confidence: 96.41%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9631847739219666" data-text="phone no.: +43(0)50505/50825"
             data-original-text="Phone No.: +43(0)50505/50825" data-index="12" data-page="0"
             data-edited="false" style="left:636px;top:357px;width:321px;height:20px;">
            <div class="underline" style="background-color:rgb(9,245,100);"></div>
            <div class="ocr-tooltip">Phone No.: +43(0)50505/50825 (Confidence: 96.32%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9263371229171753" data-text="stationary bldg., mai-kolachi road,"
             data-original-text="STATIONARY BLDG., MAI-KOLACHI ROAD," data-index="13" data-page="0"
             data-edited="false" style="left:181px;top:367px;width:395px;height:17px;">
            <div class="underline" style="background-color:rgb(18,236,100);"></div>
            <div class="ocr-tooltip">STATIONARY BLDG., MAI-KOLACHI ROAD, (Confidence: 92.63%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9662683010101318" data-text="karachi, pakistan"
             data-original-text="KARACHI, PAKISTAN" data-index="14" data-page="0"
             data-edited="false" style="left:181px;top:384px;width:196px;height:21px;">
            <div class="underline" style="background-color:rgb(8,246,100);"></div>
            <div class="ocr-tooltip">KARACHI, PAKISTAN (Confidence: 96.63%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9665963649749756" data-text="fax no.:"
             data-original-text="Fax No.:" data-index="15" data-page="0"
             data-edited="false" style="left:636px;top:378px;width:92px;height:17px;">
            <div class="underline" style="background-color:rgb(8,246,100);"></div>
            <div class="ocr-tooltip">Fax No.: (Confidence: 96.66%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9867470860481262" data-text="+43(0)50505/51028"
             data-original-text="+43(0)50505/51028" data-index="16" data-page="0"
             data-edited="false" style="left:759px;top:376px;width:197px;height:20px;">
            <div class="underline" style="background-color:rgb(3,251,100);"></div>
            <div class="ocr-tooltip">+43(0)50505/51028 (Confidence: 98.67%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.962272584438324" data-text="email: dok@unicredi tgroup.at"
             data-original-text="eMail: dok@unicredi tgroup.at" data-index="17" data-page="0"
             data-edited="false" style="left:636px;top:397px;width:321px;height:17px;">
            <div class="underline" style="background-color:rgb(9,245,100);"></div>
            <div class="ocr-tooltip">eMail: dok@unicredi tgroup.at (Confidence: 96.23%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9861747026443481" data-text="our reference"
             data-original-text="Our Reference" data-index="18" data-page="0"
             data-edited="false" style="left:635px;top:501px;width:150px;height:17px;">
            <div class="underline" style="background-color:rgb(3,251,100);"></div>
            <div class="ocr-tooltip">Our Reference (Confidence: 98.62%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9980527758598328" data-text="date"
             data-original-text="Date" data-index="19" data-page="0"
             data-edited="false" style="left:928px;top:499px;width:53px;height:21px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">Date (Confidence: 99.81%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9943683743476868" data-text="8813a2501077a001"
             data-original-text="8813A2501077A001" data-index="20" data-page="0"
             data-edited="false" style="left:634px;top:516px;width:184px;height:20px;">
            <div class="underline" style="background-color:rgb(1,253,100);"></div>
            <div class="ocr-tooltip">8813A2501077A001 (Confidence: 99.44%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9883865714073181" data-text="your reference"
             data-original-text="Your Reference" data-index="21" data-page="0"
             data-edited="false" style="left:635px;top:537px;width:164px;height:19px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">Your Reference (Confidence: 98.84%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.989221453666687" data-text="0578ilc074195"
             data-original-text="0578ILC074195" data-index="22" data-page="0"
             data-edited="false" style="left:637px;top:555px;width:149px;height:17px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">0578ILC074195 (Confidence: 98.92%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9567515850067139" data-text="reference: documentary credit - mail of documents - 1st mall"
             data-original-text="Reference: Documentary Credit - Mail of documents - 1st Mall" data-index="23" data-page="0"
             data-edited="false" style="left:179px;top:626px;width:684px;height:19px;">
            <div class="underline" style="background-color:rgb(11,243,100);"></div>
            <div class="ocr-tooltip">Reference: Documentary Credit - Mail of documents - 1st Mall (Confidence: 95.68%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9201858639717102" data-text="applicant:bulk flexible pakistan pvt ltd, karachi"
             data-original-text="APPLICANt:BULK FLEXIBLE PAKISTAN PVT LTD, KARACHI" data-index="24" data-page="0"
             data-edited="false" style="left:303px;top:644px;width:573px;height:22px;">
            <div class="underline" style="background-color:rgb(20,234,100);"></div>
            <div class="ocr-tooltip">APPLICANt:BULK FLEXIBLE PAKISTAN PVT LTD, KARACHI (Confidence: 92.02%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9507819414138794" data-text="beneficiary: starlinger  co gmbh"
             data-original-text="Beneficiary: Starlinger  Co GmbH" data-index="25" data-page="0"
             data-edited="false" style="left:305px;top:665px;width:376px;height:17px;">
            <div class="underline" style="background-color:rgb(12,242,100);"></div>
            <div class="ocr-tooltip">Beneficiary: Starlinger  Co GmbH (Confidence: 95.08%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9018246531486511" data-text="value date"
             data-original-text="Value Date" data-index="26" data-page="0"
             data-edited="false" style="left:875px;top:523px;width:274px;height:240px;">
            <div class="underline" style="background-color:rgb(25,229,100);"></div>
            <div class="ocr-tooltip">Value Date (Confidence: 90.18%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9345445036888123" data-text="please find enclosed the following documents for usd b4.00o,0o:"
             data-original-text="Please find enclosed the following documents for USD B4.00o,0o:" data-index="27" data-page="0"
             data-edited="false" style="left:180px;top:736px;width:716px;height:19px;">
            <div class="underline" style="background-color:rgb(16,238,100);"></div>
            <div class="ocr-tooltip">Please find enclosed the following documents for USD B4.00o,0o: (Confidence: 93.45%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.6288394927978516" data-text="csaug/as"
             data-original-text="CsAug/as" data-index="28" data-page="0"
             data-edited="false" style="left:935px;top:578px;width:289px;height:282px;">
            <div class="underline" style="background-color:rgb(94,160,100);"></div>
            <div class="ocr-tooltip">CsAug/as (Confidence: 62.88%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8905338048934937" data-text="lst mail"
             data-original-text="lst mail" data-index="29" data-page="0"
             data-edited="false" style="left:178px;top:771px;width:96px;height:23px;">
            <div class="underline" style="background-color:rgb(27,227,100);"></div>
            <div class="ocr-tooltip">lst mail (Confidence: 89.05%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9724240303039551" data-text="2nd mail"
             data-original-text="2nd mail" data-index="30" data-page="0"
             data-edited="false" style="left:315px;top:772px;width:96px;height:21px;">
            <div class="underline" style="background-color:rgb(7,247,100);"></div>
            <div class="ocr-tooltip">2nd mail (Confidence: 97.24%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9965534210205078" data-text="documents"
             data-original-text="documents" data-index="31" data-page="0"
             data-edited="false" style="left:454px;top:774px;width:104px;height:17px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">documents (Confidence: 99.66%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9908284544944763" data-text="2/2"
             data-original-text="2/2" data-index="32" data-page="0"
             data-edited="false" style="left:178px;top:789px;width:41px;height:23px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">2/2 (Confidence: 99.08%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9986066818237305" data-text="draft"
             data-original-text="draft" data-index="33" data-page="0"
             data-edited="false" style="left:453px;top:790px;width:62px;height:21px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">draft (Confidence: 99.86%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9981299638748169" data-text="10/11"
             data-original-text="10/11" data-index="34" data-page="0"
             data-edited="false" style="left:178px;top:808px;width:63px;height:22px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">10/11 (Confidence: 99.81%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9993301033973694" data-text="1/11"
             data-original-text="1/11" data-index="35" data-page="0"
             data-edited="false" style="left:313px;top:807px;width:54px;height:26px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">1/11 (Confidence: 99.93%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9820632934570312" data-text="commercial invoice"
             data-original-text="commercial invoice" data-index="36" data-page="0"
             data-edited="false" style="left:453px;top:810px;width:205px;height:19px;">
            <div class="underline" style="background-color:rgb(4,250,100);"></div>
            <div class="ocr-tooltip">commercial invoice (Confidence: 98.21%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9911033511161804" data-text="2/2"
             data-original-text="2/2" data-index="37" data-page="0"
             data-edited="false" style="left:176px;top:824px;width:43px;height:26px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">2/2 (Confidence: 99.11%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9754826426506042" data-text="packing list without our obligation"
             data-original-text="packing list without our obligation" data-index="38" data-page="0"
             data-edited="false" style="left:451px;top:827px;width:402px;height:21px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">packing list without our obligation (Confidence: 97.55%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9714205265045166" data-text="2/2"
             data-original-text="2/2" data-index="39" data-page="0"
             data-edited="false" style="left:176px;top:842px;width:43px;height:27px;">
            <div class="underline" style="background-color:rgb(7,247,100);"></div>
            <div class="ocr-tooltip">2/2 (Confidence: 97.14%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9694283604621887" data-text="shipping advice"
             data-original-text="shipping advice" data-index="40" data-page="0"
             data-edited="false" style="left:455px;top:847px;width:170px;height:17px;">
            <div class="underline" style="background-color:rgb(7,247,100);"></div>
            <div class="ocr-tooltip">shipping advice (Confidence: 96.94%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9892544746398926" data-text="2/3+nnc"
             data-original-text="2/3+nnc" data-index="41" data-page="0"
             data-edited="false" style="left:179px;top:863px;width:85px;height:21px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">2/3+nnc (Confidence: 98.93%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9993682503700256" data-text="1/3"
             data-original-text="1/3" data-index="42" data-page="0"
             data-edited="false" style="left:312px;top:860px;width:44px;height:27px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">1/3 (Confidence: 99.94%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9140124320983887" data-text="konnossement/b1ll of lading othk40020753"
             data-original-text="Konnossement/B1ll of Lading OTHK40020753" data-index="43" data-page="0"
             data-edited="false" style="left:452px;top:863px;width:457px;height:20px;">
            <div class="underline" style="background-color:rgb(21,233,100);"></div>
            <div class="ocr-tooltip">Konnossement/B1ll of Lading OTHK40020753 (Confidence: 91.40%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9805377721786499" data-text="second mail will be sent by separate mail."
             data-original-text="Second Mail will be sent by separate mail." data-index="44" data-page="0"
             data-edited="false" style="left:179px;top:898px;width:477px;height:24px;">
            <div class="underline" style="background-color:rgb(4,250,100);"></div>
            <div class="ocr-tooltip">Second Mail will be sent by separate mail. (Confidence: 98.05%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.975597620010376" data-text="maturity: sight"
             data-original-text="Maturity: Sight" data-index="45" data-page="0"
             data-edited="false" style="left:178px;top:938px;width:175px;height:19px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">Maturity: Sight (Confidence: 97.56%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9173784255981445" data-text="according to credit terms we reimbursed ourselves on deutsche bk.trust"
             data-original-text="According to credit terms We reimbursed ourselves on DEUTsCHE BK.TRUST" data-index="46" data-page="0"
             data-edited="false" style="left:178px;top:971px;width:801px;height:23px;">
            <div class="underline" style="background-color:rgb(21,233,100);"></div>
            <div class="ocr-tooltip">According to credit terms We reimbursed ourselves on DEUTsCHE BK.TRUST (Confidence: 91.74%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9198132753372192" data-text="co.amer,new york for usd 84.756,00 value 05.08.2025."
             data-original-text="CO.AMER,NEW YORK fOr USD 84.756,00 value 05.08.2025." data-index="47" data-page="0"
             data-edited="false" style="left:178px;top:991px;width:604px;height:21px;">
            <div class="underline" style="background-color:rgb(20,234,100);"></div>
            <div class="ocr-tooltip">CO.AMER,NEW YORK fOr USD 84.756,00 value 05.08.2025. (Confidence: 91.98%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.31529325246810913" data-text="od46"
             data-original-text="oD46" data-index="48" data-page="0"
             data-edited="false" style="left:894px;top:995px;width:98px;height:44px;">
            <div class="underline" style="background-color:rgb(174,80,100);"></div>
            <div class="ocr-tooltip">oD46 (Confidence: 31.53%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9515663385391235" data-text="details of settlement :"
             data-original-text="DETAILS OF SETTLEMENT :" data-index="49" data-page="0"
             data-edited="false" style="left:179px;top:1030px;width:251px;height:16px;">
            <div class="underline" style="background-color:rgb(12,242,100);"></div>
            <div class="ocr-tooltip">DETAILS OF SETTLEMENT : (Confidence: 95.16%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9981689453125" data-text="amount"
             data-original-text="Amount" data-index="50" data-page="0"
             data-edited="false" style="left:179px;top:1047px;width:72px;height:18px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">Amount (Confidence: 99.82%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9946250915527344" data-text="usd"
             data-original-text="USD" data-index="51" data-page="0"
             data-edited="false" style="left:803px;top:1042px;width:44px;height:26px;">
            <div class="underline" style="background-color:rgb(1,253,100);"></div>
            <div class="ocr-tooltip">USD (Confidence: 99.46%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8995119333267212" data-text="84.000.00-"
             data-original-text="84.000.00-" data-index="52" data-page="0"
             data-edited="false" style="left:919px;top:1044px;width:122px;height:20px;">
            <div class="underline" style="background-color:rgb(25,229,100);"></div>
            <div class="ocr-tooltip">84.000.00- (Confidence: 89.95%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.7687376737594604" data-text="othes"
             data-original-text="othes" data-index="53" data-page="0"
             data-edited="false" style="left:1065px;top:1017px;width:102px;height:78px;">
            <div class="underline" style="background-color:rgb(58,196,100);"></div>
            <div class="ocr-tooltip">othes (Confidence: 76.87%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9634437561035156" data-text="commissions and chargeg"
             data-original-text="Commissions and chargeg" data-index="54" data-page="0"
             data-edited="false" style="left:180px;top:1066px;width:263px;height:17px;">
            <div class="underline" style="background-color:rgb(9,245,100);"></div>
            <div class="ocr-tooltip">Commissions and chargeg (Confidence: 96.34%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9939401745796204" data-text="usd"
             data-original-text="USD" data-index="55" data-page="0"
             data-edited="false" style="left:805px;top:1064px;width:41px;height:19px;">
            <div class="underline" style="background-color:rgb(1,253,100);"></div>
            <div class="ocr-tooltip">USD (Confidence: 99.39%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8730506896972656" data-text="756,00="
             data-original-text="756,00=" data-index="56" data-page="0"
             data-edited="false" style="left:949px;top:1062px;width:104px;height:24px;">
            <div class="underline" style="background-color:rgb(32,222,100);"></div>
            <div class="ocr-tooltip">756,00= (Confidence: 87.31%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9833742380142212" data-text="details commissions and charges:"
             data-original-text="Details commissions and charges:" data-index="57" data-page="0"
             data-edited="false" style="left:222px;top:1101px;width:366px;height:20px;">
            <div class="underline" style="background-color:rgb(4,250,100);"></div>
            <div class="ocr-tooltip">Details commissions and charges: (Confidence: 98.34%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.7985831499099731" data-text="bank"
             data-original-text="BanK" data-index="58" data-page="0"
             data-edited="false" style="left:1058px;top:1055px;width:123px;height:100px;">
            <div class="underline" style="background-color:rgb(51,203,100);"></div>
            <div class="ocr-tooltip">BanK (Confidence: 79.86%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9809513688087463" data-text="confirmation commission"
             data-original-text="Confirmation commission" data-index="59" data-page="0"
             data-edited="false" style="left:223px;top:1121px;width:264px;height:17px;">
            <div class="underline" style="background-color:rgb(4,250,100);"></div>
            <div class="ocr-tooltip">Confirmation commission (Confidence: 98.10%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9901596903800964" data-text="usd"
             data-original-text="USD" data-index="60" data-page="0"
             data-edited="false" style="left:554px;top:1118px;width:41px;height:21px;">
            <div class="underline" style="background-color:rgb(2,252,100);"></div>
            <div class="ocr-tooltip">USD (Confidence: 99.02%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9748636484146118" data-text="756,00-"
             data-original-text="756,00-" data-index="61" data-page="0"
             data-edited="false" style="left:700px;top:1118px;width:87px;height:20px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">756,00- (Confidence: 97.49%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9807870388031006" data-text="we cartiry that we have endorsed this drawing/the negotiated amount on the"
             data-original-text="We cartiry that we have endorsed this drawing/the negotiated amount on the" data-index="62" data-page="0"
             data-edited="false" style="left:177px;top:1154px;width:847px;height:22px;">
            <div class="underline" style="background-color:rgb(4,250,100);"></div>
            <div class="ocr-tooltip">We cartiry that we have endorsed this drawing/the negotiated amount on the (Confidence: 98.08%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8909379839897156" data-text="chayes"
             data-original-text="Chayes" data-index="63" data-page="0"
             data-edited="false" style="left:1059px;top:1101px;width:148px;height:125px;">
            <div class="underline" style="background-color:rgb(27,227,100);"></div>
            <div class="ocr-tooltip">Chayes (Confidence: 89.09%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9799627661705017" data-text="reverse of the original credit."
             data-original-text="reverse of the original credit." data-index="64" data-page="0"
             data-edited="false" style="left:179px;top:1173px;width:354px;height:21px;">
            <div class="underline" style="background-color:rgb(5,249,100);"></div>
            <div class="ocr-tooltip">reverse of the original credit. (Confidence: 98.00%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9749468564987183" data-text="regarding the enclosed draft(s) beneficiaries have authorized you to add the"
             data-original-text="Regarding the enclosed draft(s) beneficiaries have authorized you to add the" data-index="65" data-page="0"
             data-edited="false" style="left:179px;top:1209px;width:867px;height:22px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">Regarding the enclosed draft(s) beneficiaries have authorized you to add the (Confidence: 97.49%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9642993807792664" data-text="clause &quot;payable to order&quot; or a similar clause, if you need such clause by any"
             data-original-text="clause &quot;payable to order&quot; or a similar clause, if you need such clause by any" data-index="66" data-page="0"
             data-edited="false" style="left:180px;top:1229px;width:877px;height:19px;">
            <div class="underline" style="background-color:rgb(9,245,100);"></div>
            <div class="ocr-tooltip">clause &quot;payable to order&quot; or a similar clause, if you need such clause by any (Confidence: 96.43%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9983161687850952" data-text="reason."
             data-original-text="reason." data-index="67" data-page="0"
             data-edited="false" style="left:179px;top:1248px;width:80px;height:19px;">
            <div class="underline" style="background-color:rgb(0,254,100);"></div>
            <div class="ocr-tooltip">reason. (Confidence: 99.83%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9729412198066711" data-text="we confirm that all terms and conditions of this l/c have been complied with."
             data-original-text="We confirm that all terms and conditions of this L/C have been complied with." data-index="68" data-page="0"
             data-edited="false" style="left:177px;top:1281px;width:876px;height:22px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">We confirm that all terms and conditions of this L/C have been complied with. (Confidence: 97.29%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9565517902374268" data-text="reference is made to our separate swift-advice."
             data-original-text="Reference is made to our separate SwIFT-advice." data-index="69" data-page="0"
             data-edited="false" style="left:179px;top:1319px;width:534px;height:20px;">
            <div class="underline" style="background-color:rgb(11,243,100);"></div>
            <div class="ocr-tooltip">Reference is made to our separate SwIFT-advice. (Confidence: 95.66%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.985480785369873" data-text="received"
             data-original-text="RECEIVED" data-index="70" data-page="0"
             data-edited="false" style="left:840px;top:1340px;width:100px;height:52px;">
            <div class="underline" style="background-color:rgb(3,251,100);"></div>
            <div class="ocr-tooltip">RECEIVED (Confidence: 98.55%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9852101802825928" data-text="30 jul 2025"
             data-original-text="30 JUL 2025" data-index="71" data-page="0"
             data-edited="false" style="left:830px;top:1377px;width:142px;height:66px;">
            <div class="underline" style="background-color:rgb(3,251,100);"></div>
            <div class="ocr-tooltip">30 JUL 2025 (Confidence: 98.52%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9755800366401672" data-text="ublcpu"
             data-original-text="UBLCPU" data-index="72" data-page="0"
             data-edited="false" style="left:869px;top:1426px;width:89px;height:41px;">
            <div class="underline" style="background-color:rgb(6,248,100);"></div>
            <div class="ocr-tooltip">UBLCPU (Confidence: 97.56%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.7487645149230957" data-text="importadoptt"
             data-original-text="ImportaDoptt" data-index="73" data-page="0"
             data-edited="false" style="left:864px;top:1441px;width:103px;height:44px;">
            <div class="underline" style="background-color:rgb(64,190,100);"></div>
            <div class="ocr-tooltip">ImportaDoptt (Confidence: 74.88%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9597344398498535" data-text="company name"
             data-original-text="Company name" data-index="74" data-page="0"
             data-edited="false" style="left:181px;top:1505px;width:96px;height:17px;">
            <div class="underline" style="background-color:rgb(10,244,100);"></div>
            <div class="ocr-tooltip">Company name (Confidence: 95.97%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8862221240997314" data-text="company locaton 102o wien, rothschildplatz 1, register of companles handelsgericht wien,"
             data-original-text="Company locaton 102O Wien, Rothschildplatz 1, Register of companles Handelsgericht Wien," data-index="75" data-page="0"
             data-edited="false" style="left:395px;top:1501px;width:559px;height:20px;">
            <div class="underline" style="background-color:rgb(29,225,100);"></div>
            <div class="ocr-tooltip">Company locaton 102O Wien, Rothschildplatz 1, Register of companles Handelsgericht Wien, (Confidence: 88.62%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.9307788014411926" data-text="unicredit bank austria ag"
             data-original-text="UnICredit Bank Austria AG" data-index="76" data-page="0"
             data-edited="false" style="left:180px;top:1518px;width:171px;height:19px;">
            <div class="underline" style="background-color:rgb(17,237,100);"></div>
            <div class="ocr-tooltip">UnICredit Bank Austria AG (Confidence: 93.08%)</div>
        </div>
        
        <div class="ocr-line" data-score="0.8500304818153381" data-text="fn 150714p.vat-id atu51507409,blz 12000, bic bkauatww.www bankaustria at"
             data-original-text="FN 150714p.VAT-Id ATU51507409,BLZ 12000, BIC BKAUATWW.WWW bankauStria at" data-index="77" data-page="0"
             data-edited="false" style="left:395px;top:1517px;width:532px;height:19px;">
            <div class="underline" style="background-color:rgb(38,216,100);"></div>
            <div class="ocr-tooltip">FN 150714p.VAT-Id ATU51507409,BLZ 12000, BIC BKAUATWW.WWW bankauStria at (Confidence: 85.00%)</div>
        </div>
        
            </div>
            
                    </div>
                </div>
            </div>
            
            <!-- Edit Text Modal -->
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <h3>Edit Text</h3>
                    <textarea id="editTextArea"></textarea>
                    <div class="modal-buttons">
                        <button id="cancelEditBtn">Cancel</button>
                        <button id="saveEditBtn">Save</button>
                    </div>
                </div>
            </div>
            
            <!-- Add Text Modal -->
            <div id="addTextModal" class="modal">
                <div class="modal-content">
                    <h3>Add New Text</h3>
                    <textarea id="newTextArea" placeholder="Enter text..."></textarea>
                    <div class="modal-buttons">
                        <button id="cancelAddBtn">Cancel</button>
                        <button id="confirmAddBtn">Add</button>
                    </div>
                </div>
            </div>
            
            <!-- Stats Modal -->
            <div id="statsModal" class="modal">
                <div class="modal-content">
                    <h3>OCR Statistics</h3>
                    <div id="statsContent">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">Total Text Elements</div>
                                <div class="stat-value" id="totalElements">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Average Confidence</div>
                                <div class="stat-value" id="avgConfidence">0%</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Edited Elements</div>
                                <div class="stat-value" id="editedElements">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Low Confidence (<50%)</div>
                                <div class="stat-value" id="lowConfidence">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button id="closeStatsBtn">Close</button>
                    </div>
                </div>
            </div>
            
            <!-- Export Modal -->
            <div id="exportModal" class="modal">
                <div class="modal-content">
                    <h3>Export OCR Data</h3>
                    <div class="export-options">
                        <div class="export-option">
                            <input type="radio" id="exportJson" name="exportFormat" value="json" checked>
                            <label for="exportJson">JSON Format</label>
                        </div>
                        <div class="export-option">
                            <input type="radio" id="exportText" name="exportFormat" value="text">
                            <label for="exportText">Plain Text</label>
                        </div>
                        <div class="export-option">
                            <input type="radio" id="exportCsv" name="exportFormat" value="csv">
                            <label for="exportCsv">CSV Format</label>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button id="cancelExportBtn">Cancel</button>
                        <button id="confirmExportBtn">Export</button>
                    </div>
                </div>
            </div>
            
            <div class="drawing-box" id="drawingBox"></div>
            
            <script>
                
                // DOM Elements
                const elements = {
                    thresholdSlider: document.getElementById('thresholdSlider'),
                    thresholdVal: document.getElementById('thresholdVal'),
                    textFilter: document.getElementById('textFilter'),
                    addTextBtn: document.getElementById('addTextBtn'),
                    saveBtn: document.getElementById('saveBtn'),
                    editModal: document.getElementById('editModal'),
                    editTextArea: document.getElementById('editTextArea'),
                    cancelEditBtn: document.getElementById('cancelEditBtn'),
                    saveEditBtn: document.getElementById('saveEditBtn'),
                    addTextModal: document.getElementById('addTextModal'),
                    newTextArea: document.getElementById('newTextArea'),
                    cancelAddBtn: document.getElementById('cancelAddBtn'),
                    confirmAddBtn: document.getElementById('confirmAddBtn'),
                    drawingBox: document.getElementById('drawingBox'),
                    undoBtn: document.getElementById('undoBtn'),
                    redoBtn: document.getElementById('redoBtn'),
                    zoomInBtn: document.getElementById('zoomInBtn'),
                    zoomOutBtn: document.getElementById('zoomOutBtn'),
                    zoomResetBtn: document.getElementById('zoomResetBtn'),
                    zoomLevel: document.getElementById('zoomLevel'),
                    themeToggle: document.getElementById('themeToggle'),
                    statsBtn: document.getElementById('statsBtn'),
                    statsModal: document.getElementById('statsModal'),
                    closeStatsBtn: document.getElementById('closeStatsBtn'),
                    exportBtn: document.getElementById('exportBtn'),
                    exportModal: document.getElementById('exportModal'),
                    cancelExportBtn: document.getElementById('cancelExportBtn'),
                    confirmExportBtn: document.getElementById('confirmExportBtn'),
                    pagesWrapper: document.getElementById('pagesWrapper'),
                    collapseBtn: document.getElementById('collapseBtn'),
                    collapseIcon: document.getElementById('collapseIcon'),
                    toolbarSecondRow: document.getElementById('toolbarSecondRow'),
                    progressBar: document.getElementById('progressBar'),
                    progressFill: document.getElementById('progressFill'),
                    progressText: document.getElementById('progressText'),
                    thumbnailSidebar: document.getElementById('thumbnailSidebar')
                };
            

                // State
                let state = {
                    currentEditElement: null,
                    isDrawing: false,
                    startX: 0, startY: 0, endX: 0, endY: 0,
                    currentPageContainer: null,
                    ocrData: { pages: [] },
                    zoomLevel: 1.0,
                    selectedElements: new Set(),
                    undoStack: [],
                    redoStack: [],
                    toolbarCollapsed: false,
                    currentPage: 0,
                    totalPages: 0,
                    loadedPages: new Set(),
                    loading: false
                };
            

                // Initialize
                function init() {
                    // Get total number of pages
                    state.totalPages = document.querySelectorAll('.page-container').length;
                    
                    // Initialize OCR data structure
                    document.querySelectorAll('.page-container').forEach(pageContainer => {
                        const pageIdx = parseInt(pageContainer.id.split('-')[1]);
                        state.ocrData.pages[pageIdx] = { rec_texts: [], rec_scores: [], rec_boxes: [], edited: [] };
                        
                        // Only process non-lazy pages initially
                        if (!pageContainer.classList.contains('lazy-page')) {
                            state.loadedPages.add(pageIdx);
                            
                            pageContainer.querySelectorAll('.ocr-line').forEach(line => {
                                const index = parseInt(line.dataset.index);
                                state.ocrData.pages[pageIdx].rec_texts[index] = line.dataset.originalText;
                                state.ocrData.pages[pageIdx].rec_scores[index] = parseFloat(line.dataset.score);
                                state.ocrData.pages[pageIdx].edited[index] = line.dataset.edited === "true";
                                
                                const rect = line.getBoundingClientRect();
                                state.ocrData.pages[pageIdx].rec_boxes[index] = [
                                    rect.left, rect.top, rect.right, rect.bottom
                                ];
                            });
                        }
                    });
                    
                    // Set initial zoom
                    setZoom(state.zoomLevel);
                    
                    // Load toolbar state
                    loadToolbarState();
                    
                    // Setup lazy loading
                    setupLazyLoading();
                    
                    // Setup thumbnail navigation
                    setupThumbnailNavigation();
                    
                    // Event Listeners
                    setupEventListeners();
                    
                    updateColors();
                }
                
                function setupEventListeners() {
                    // Basic controls
                    elements.thresholdSlider.addEventListener('input', updateColors);
                    elements.textFilter.addEventListener('input', updateTextFilter);
                    elements.saveEditBtn.addEventListener('click', saveEditedText);
                    elements.cancelEditBtn.addEventListener('click', () => elements.editModal.style.display = 'none');
                    elements.addTextBtn.addEventListener('click', startAddTextMode);
                    elements.confirmAddBtn.addEventListener('click', confirmAddText);
                    elements.cancelAddBtn.addEventListener('click', cancelAddText);
                    elements.saveBtn.addEventListener('click', saveChanges);
                    
                    // Undo/Redo
                    elements.undoBtn.addEventListener('click', undo);
                    elements.redoBtn.addEventListener('click', redo);
                    
                    // Zoom controls
                    elements.zoomInBtn.addEventListener('click', () => setZoom(state.zoomLevel + 0.1));
                    elements.zoomOutBtn.addEventListener('click', () => setZoom(state.zoomLevel - 0.1));
                    elements.zoomResetBtn.addEventListener('click', () => setZoom(1.0));
                    
                    // Theme toggle
                    elements.themeToggle.addEventListener('click', toggleTheme);
                    
                    // Stats
                    elements.statsBtn.addEventListener('click', showStats);
                    elements.closeStatsBtn.addEventListener('click', () => elements.statsModal.style.display = 'none');
                    
                    // Export
                    elements.exportBtn.addEventListener('click', () => elements.exportModal.style.display = 'block');
                    elements.cancelExportBtn.addEventListener('click', () => elements.exportModal.style.display = 'none');
                    elements.confirmExportBtn.addEventListener('click', exportData);
                    
                    // Toolbar collapse
                    elements.collapseBtn.addEventListener('click', toggleToolbar);
                    
                    // OCR line click handlers with multi-select support
                    document.querySelectorAll('.ocr-line').forEach(line => {
                        line.addEventListener('click', (e) => {
                            if (e.ctrlKey || e.metaKey) {
                                // Multi-select with Ctrl/Cmd
                                e.stopPropagation();
                                if (state.selectedElements.has(line)) {
                                    state.selectedElements.delete(line);
                                    line.classList.remove('selected');
                                } else {
                                    state.selectedElements.add(line);
                                    line.classList.add('selected');
                                }
                            } else {
                                // Single selection
                                state.selectedElements.forEach(el => el.classList.remove('selected'));
                                state.selectedElements.clear();
                                
                                e.stopPropagation();
                                state.currentEditElement = line;
                                elements.editTextArea.value = line.dataset.originalText;
                                elements.editModal.style.display = 'block';
                            }
                        });
                    });
                    
                    // Keyboard shortcuts
                    document.addEventListener('keydown', handleKeyboardShortcuts);
                    
                    window.addEventListener('click', (e) => {
                        if (e.target === elements.editModal) elements.editModal.style.display = 'none';
                        if (e.target === elements.addTextModal) cancelAddText();
                        if (e.target === elements.statsModal) elements.statsModal.style.display = 'none';
                        if (e.target === elements.exportModal) elements.exportModal.style.display = 'none';
                    });
                }
                
                function handleKeyboardShortcuts(e) {
                    // Ctrl/Cmd + S to save
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault();
                        saveChanges();
                    }
                    
                    // Ctrl/Cmd + F to focus search
                    if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                        e.preventDefault();
                        elements.textFilter.focus();
                    }
                    
                    // Esc to close modals
                    if (e.key === 'Escape') {
                        elements.editModal.style.display = 'none';
                        elements.addTextModal.style.display = 'none';
                        elements.statsModal.style.display = 'none';
                        elements.exportModal.style.display = 'none';
                    }
                    
                    // Ctrl/Cmd + N to add new text
                    if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                        e.preventDefault();
                        startAddTextMode();
                    }
                    
                    // Ctrl/Cmd + Z to undo
                    if ((e.ctrlKey || e.metaKey) && e.key === 'z') {
                        e.preventDefault();
                        undo();
                    }
                    
                    // Ctrl/Cmd + Y to redo
                    if ((e.ctrlKey || e.metaKey) && e.key === 'y') {
                        e.preventDefault();
                        redo();
                    }
                }
            

                // Core Functions
                function updateColors() {
                    const threshold = parseFloat(elements.thresholdSlider.value);
                    elements.thresholdVal.textContent = threshold.toFixed(2);
                    
                    document.querySelectorAll('.ocr-line').forEach(el => {
                        const score = parseFloat(el.dataset.score);
                        const isEdited = el.dataset.edited === "true";
                        const color = isEdited ? 'rgb(245, 158, 11)' : 
                                    (score >= threshold ? 'rgb(16, 185, 129)' : 'rgb(239, 68, 68)');
                        el.querySelector('.underline').style.backgroundColor = color;
                    });
                }
                
                function updateTextFilter() {
                    const keyword = elements.textFilter.value.trim().toLowerCase();
                    document.querySelectorAll('.ocr-line').forEach(el => {
                        el.style.display = !keyword || el.dataset.text.includes(keyword) ? "block" : "none";
                    });
                }
                
                function saveEditedText() {
                    if (!state.currentEditElement) return;
                    
                    const newText = elements.editTextArea.value;
                    const safeText = newText.replace(/"/g, '&quot;').replace(/'/g, '&apos;');
                    const line = state.currentEditElement;
                    const score = parseFloat(line.dataset.score);
                    
                    // Save state for undo
                    saveState();
                    
                    // Update element
                    line.dataset.originalText = newText;
                    line.dataset.text = safeText.toLowerCase();
                    line.dataset.edited = "true";
                    line.querySelector('.ocr-tooltip').textContent = `${newText} (Confidence: ${(score*100).toFixed(1)}%) [Edited]`;
                    
                    if (!line.querySelector('.edited-badge')) {
                        const badge = document.createElement('div');
                        badge.className = 'edited-badge';
                        badge.textContent = 'EDITED';
                        line.appendChild(badge);
                    }
                    
                    // Update data
                    const pageIdx = parseInt(line.dataset.page);
                    const index = parseInt(line.dataset.index);
                    state.ocrData.pages[pageIdx].rec_texts[index] = newText;
                    state.ocrData.pages[pageIdx].edited[index] = true;
                    
                    elements.editModal.style.display = 'none';
                    state.currentEditElement = null;
                    updateColors();
                }
            

                // Add Text Functions
                function startAddTextMode() {
                    elements.addTextModal.style.display = 'none';
                    elements.newTextArea.value = '';
                    state.isDrawing = false;
                    elements.drawingBox.style.display = 'none';
                    
                    document.querySelectorAll('.page-container').forEach(container => {
                        container.style.pointerEvents = 'auto';
                        container.style.cursor = 'crosshair';
                    });
                    
                    showNotification('Draw a bounding box where you want to add text', 'info');
                }
                
                function confirmAddText() {
                    const text = elements.newTextArea.value.trim();
                    if (!text || elements.drawingBox.style.display !== 'block' || !state.currentPageContainer) return;
                    
                    const left = parseInt(elements.drawingBox.style.left);
                    const top = parseInt(elements.drawingBox.style.top);
                    const width = parseInt(elements.drawingBox.style.width);
                    const height = parseInt(elements.drawingBox.style.height);
                    
                    if (width > 10 && height > 10) {
                        const safeText = text.replace(/"/g, '&quot;').replace(/'/g, '&apos;');
                        const pageIdx = parseInt(state.currentPageContainer.id.split('-')[1]);
                        
                        // Save state for undo
                        saveState();
                        
                        // Create new element
                        const newLine = document.createElement('div');
                        newLine.className = 'ocr-line';
                        newLine.dataset.score = '1.0';
                        newLine.dataset.text = safeText.toLowerCase();
                        newLine.dataset.originalText = safeText;
                        newLine.dataset.index = state.ocrData.pages[pageIdx].rec_texts.length;
                        newLine.dataset.page = pageIdx;
                        newLine.dataset.edited = "true";
                        newLine.style.left = `${left}px`;
                        newLine.style.top = `${top}px`;
                        newLine.style.width = `${width}px`;
                        newLine.style.height = `${height}px`;
                        newLine.innerHTML = `
                            <div class="underline" style="background-color:rgb(245, 158, 11);"></div>
                            <div class="ocr-tooltip">${safeText} (Confidence: 100.0%) [Added]</div>
                            <div class="edited-badge">ADDED</div>
                        `;
                        
                        newLine.addEventListener('click', (e) => {
                            if (e.ctrlKey || e.metaKey) {
                                // Multi-select with Ctrl/Cmd
                                e.stopPropagation();
                                if (state.selectedElements.has(newLine)) {
                                    state.selectedElements.delete(newLine);
                                    newLine.classList.remove('selected');
                                } else {
                                    state.selectedElements.add(newLine);
                                    newLine.classList.add('selected');
                                }
                            } else {
                                // Single selection
                                state.selectedElements.forEach(el => el.classList.remove('selected'));
                                state.selectedElements.clear();
                                
                                e.stopPropagation();
                                state.currentEditElement = newLine;
                                elements.editTextArea.value = newLine.dataset.originalText;
                                elements.editModal.style.display = 'block';
                            }
                        });
                        
                        state.currentPageContainer.appendChild(newLine);
                        
                        // Update data
                        state.ocrData.pages[pageIdx].rec_texts.push(text);
                        state.ocrData.pages[pageIdx].rec_scores.push(1.0);
                        state.ocrData.pages[pageIdx].edited.push(true);
                        state.ocrData.pages[pageIdx].rec_boxes.push([left, top, left+width, top+height]);
                        
                        showNotification('Text added successfully', 'success');
                    }
                    
                    cancelAddText();
                    updateColors();
                }
                
                function cancelAddText() {
                    elements.addTextModal.style.display = 'none';
                    elements.drawingBox.style.display = 'none';
                    document.querySelectorAll('.page-container').forEach(container => {
                        container.style.pointerEvents = '';
                        container.style.cursor = '';
                    });
                }
            

                // Save Functions
                async function saveChanges() {
                    showProgress(0, 'Saving...');
                    
                    try {
                        // Simulate progress updates
                        let progress = 0;
                        const progressInterval = setInterval(() => {
                            progress += 10;
                            showProgress(progress, 'Saving...');
                            if (progress >= 90) {
                                clearInterval(progressInterval);
                            }
                        }, 200);
                        
                        const response = await fetch('http://localhost:2500/save_ocr_data', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(state.ocrData)
                        });
                        
                        clearInterval(progressInterval);
                        showProgress(100, 'Complete!');
                        
                        if (response.ok) {
                            showNotification('OCR data saved successfully!', 'success');
                        } else {
                            showNotification('Failed to save OCR data.', 'error');
                        }
                        
                        // Hide progress bar after a delay
                        setTimeout(() => {
                            hideProgress();
                        }, 1000);
                    } catch (error) {
                        console.error('Error:', error);
                        hideProgress();
                        showNotification('Error saving data. See console for details.', 'error');
                    }
                }
            

                // Progress bar functions
                function showProgress(percent, text) {
                    elements.progressBar.style.display = 'block';
                    elements.progressFill.style.width = `${percent}%`;
                    elements.progressText.textContent = text;
                }
                
                function hideProgress() {
                    elements.progressBar.style.display = 'none';
                }
            

                // Lazy loading functions
                function setupLazyLoading() {
                    // Create an IntersectionObserver to detect when pages come into view
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting && !entry.target.classList.contains('loaded')) {
                                loadPage(entry.target);
                            }
                        });
                    }, {
                        root: elements.pagesWrapper,
                        rootMargin: '200px', // Load pages when they're within 200px of the viewport
                        threshold: 0.1
                    });
                    
                    // Observe all lazy pages
                    document.querySelectorAll('.lazy-page').forEach(page => {
                        observer.observe(page);
                    });
                }
                
                function loadPage(pageElement) {
                    const pageIdx = parseInt(pageElement.dataset.pageIndex);
                    
                    // Show loading state
                    const placeholder = pageElement.querySelector('.page-placeholder');
                    if (placeholder) {
                        placeholder.textContent = `Loading Page ${pageIdx + 1}...`;
                    }
                    
                    // Simulate loading delay for demonstration
                    setTimeout(() => {
                        // In a real implementation, you would fetch the page data here
                        // For this example, we'll just show the content
                        const content = pageElement.querySelector('.page-content');
                        if (content) {
                            content.style.display = 'block';
                            pageElement.classList.add('loaded');
                            
                            // Hide placeholder
                            if (placeholder) {
                                placeholder.style.display = 'none';
                            }
                            
                            // Load the image
                            const img = content.querySelector('.ocr-image');
                            if (img && img.dataset.src) {
                                img.src = img.dataset.src;
                            }
                            
                            // Process OCR lines for this page
                            content.querySelectorAll('.ocr-line').forEach(line => {
                                const index = parseInt(line.dataset.index);
                                state.ocrData.pages[pageIdx].rec_texts[index] = line.dataset.originalText;
                                state.ocrData.pages[pageIdx].rec_scores[index] = parseFloat(line.dataset.score);
                                state.ocrData.pages[pageIdx].edited[index] = line.dataset.edited === "true";
                                
                                const rect = line.getBoundingClientRect();
                                state.ocrData.pages[pageIdx].rec_boxes[index] = [
                                    rect.left, rect.top, rect.right, rect.bottom
                                ];
                            });
                            
                            // Mark page as loaded
                            state.loadedPages.add(pageIdx);
                            
                            // Update active thumbnail
                            updateActiveThumbnail(pageIdx);
                        }
                    }, 500); // Simulate loading time
                }
            

                // Thumbnail navigation functions
                function setupThumbnailNavigation() {
                    // Add click event to thumbnails
                    document.querySelectorAll('.thumbnail').forEach(thumbnail => {
                        thumbnail.addEventListener('click', () => {
                            const pageIdx = parseInt(thumbnail.dataset.page);
                            scrollToPage(pageIdx);
                        });
                    });
                    
                    // Set initial active thumbnail
                    updateActiveThumbnail(0);
                }
                
                function scrollToPage(pageIdx) {
                    const pageElement = document.getElementById(`page-${pageIdx}`);
                    if (pageElement) {
                        pageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        state.currentPage = pageIdx;
                        updateActiveThumbnail(pageIdx);
                        
                        // If the page is lazy and not loaded, load it now
                        if (pageElement.classList.contains('lazy-page') && !pageElement.classList.contains('loaded')) {
                            loadPage(pageElement);
                        }
                    }
                }
                
                function updateActiveThumbnail(pageIdx) {
                    // Remove active class from all thumbnails
                    document.querySelectorAll('.thumbnail').forEach(thumb => {
                        thumb.classList.remove('active');
                    });
                    
                    // Add active class to current thumbnail
                    const activeThumb = document.querySelector(`.thumbnail[data-page="${pageIdx}"]`);
                    if (activeThumb) {
                        activeThumb.classList.add('active');
                    }
                }
            

                // Undo/Redo functionality
                function saveState() {
                    state.undoStack.push(JSON.stringify(state.ocrData));
                    state.redoStack = []; // Clear redo stack when new action is performed
                    updateUndoRedoButtons();
                }
                
                function undo() {
                    if (state.undoStack.length === 0) return;
                    
                    const currentState = JSON.stringify(state.ocrData);
                    state.redoStack.push(currentState);
                    
                    const previousState = state.undoStack.pop();
                    state.ocrData = JSON.parse(previousState);
                    
                    updateUndoRedoButtons();
                    refreshUI();
                    showNotification('Undo successful', 'info');
                }
                
                function redo() {
                    if (state.redoStack.length === 0) return;
                    
                    const currentState = JSON.stringify(state.ocrData);
                    state.undoStack.push(currentState);
                    
                    const nextState = state.redoStack.pop();
                    state.ocrData = JSON.parse(nextState);
                    
                    updateUndoRedoButtons();
                    refreshUI();
                    showNotification('Redo successful', 'info');
                }
                
                function updateUndoRedoButtons() {
                    elements.undoBtn.disabled = state.undoStack.length === 0;
                    elements.redoBtn.disabled = state.redoStack.length === 0;
                }
                
                function refreshUI() {
                    // This would refresh the entire UI based on the current state
                    // For simplicity, we'll just reload the page
                    location.reload();
                }
            

                // Zoom functionality
                function setZoom(level) {
                    level = Math.max(0.3, Math.min(2.0, level)); // Limit zoom range
                    state.zoomLevel = level;
                    
                    document.querySelectorAll('.page-container').forEach(container => {
                        container.style.transform = `scale(${level})`;
                    });
                    
                    elements.zoomLevel.textContent = `${Math.round(level * 100)}%`;
                }
            

                // Theme toggle
                function toggleTheme() {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                }
                
                // Load saved theme
                function loadTheme() {
                    const savedTheme = localStorage.getItem('theme') || 'dark';
                    document.documentElement.setAttribute('data-theme', savedTheme);
                }
            

                // Toolbar collapse functionality
                function toggleToolbar() {
                    state.toolbarCollapsed = !state.toolbarCollapsed;
                    
                    if (state.toolbarCollapsed) {
                        elements.toolbarSecondRow.classList.add('collapsed');
                        elements.collapseIcon.innerHTML = `
                            <polyline points="6 9 12 15 18 9"></polyline>
                        `;
                    } else {
                        elements.toolbarSecondRow.classList.remove('collapsed');
                        elements.collapseIcon.innerHTML = `
                            <polyline points="18 15 12 9 6 15"></polyline>
                        `;
                    }
                    
                    // Save state to localStorage
                    localStorage.setItem('toolbarCollapsed', state.toolbarCollapsed);
                }
                
                function loadToolbarState() {
                    const savedState = localStorage.getItem('toolbarCollapsed');
                    if (savedState !== null) {
                        state.toolbarCollapsed = savedState === 'true';
                        
                        if (state.toolbarCollapsed) {
                            elements.toolbarSecondRow.classList.add('collapsed');
                            elements.collapseIcon.innerHTML = `
                                <polyline points="6 9 12 15 18 9"></polyline>
                            `;
                        }
                    }
                }
            

                // Statistics
                function showStats() {
                    let totalElements = 0;
                    let totalConfidence = 0;
                    let editedElements = 0;
                    let lowConfidence = 0;
                    
                    state.ocrData.pages.forEach(page => {
                        totalElements += page.rec_texts.length;
                        page.rec_scores.forEach(score => {
                            totalConfidence += score;
                            if (score < 0.5) lowConfidence++;
                        });
                        editedElements += page.edited.filter(edited => edited).length;
                    });
                    
                    const avgConfidence = totalElements > 0 ? (totalConfidence / totalElements * 100).toFixed(1) : 0;
                    
                    document.getElementById('totalElements').textContent = totalElements;
                    document.getElementById('avgConfidence').textContent = `${avgConfidence}%`;
                    document.getElementById('editedElements').textContent = editedElements;
                    document.getElementById('lowConfidence').textContent = lowConfidence;
                    
                    elements.statsModal.style.display = 'block';
                }
            

                // Export functionality
                function exportData() {
                    const format = document.querySelector('input[name="exportFormat"]:checked').value;
                    let content = '';
                    let filename = '';
                    
                    switch(format) {
                        case 'json':
                            content = JSON.stringify(state.ocrData, null, 2);
                            filename = 'ocr_data.json';
                            break;
                        case 'text':
                            content = state.ocrData.pages.map(page => 
                                page.rec_texts.join('\n')
                            ).join('\n\n--- Page Break ---\n\n');
                            filename = 'ocr_text.txt';
                            break;
                        case 'csv':
                            content = 'Page,Index,Text,Confidence,Edited\n';
                            state.ocrData.pages.forEach((page, pageIndex) => {
                                page.rec_texts.forEach((text, index) => {
                                    content += `${pageIndex + 1},${index + 1},"${text.replace(/"/g, '""')}",${(page.rec_scores[index] * 100).toFixed(1)}%,${page.edited[index] ? 'Yes' : 'No'}\n`;
                                });
                            });
                            filename = 'ocr_data.csv';
                            break;
                    }
                    
                    downloadFile(content, filename);
                    elements.exportModal.style.display = 'none';
                    showNotification(`Data exported as ${format.toUpperCase()}`, 'success');
                }
                
                function downloadFile(content, filename) {
                    const blob = new Blob([content], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            

                // Modern notification system instead of alerts
                function showNotification(message, type = 'info') {
                    const notification = document.createElement('div');
                    notification.className = 'notification';
                    notification.style.position = 'fixed';
                    notification.style.bottom = '20px';
                    notification.style.right = '20px';
                    notification.style.padding = '12px 20px';
                    notification.style.borderRadius = '8px';
                    notification.style.zIndex = '3000';
                    notification.style.fontWeight = '500';
                    notification.style.maxWidth = '300px';
                    notification.style.animation = 'slideInRight 0.3s, fadeOut 0.5s 2.5s forwards';
                    
                    // Set color based on type
                    if (type === 'success') {
                        notification.style.backgroundColor = 'rgb(16, 185, 129)';
                        notification.style.color = 'white';
                    } else if (type === 'error') {
                        notification.style.backgroundColor = 'rgb(239, 68, 68)';
                        notification.style.color = 'white';
                    } else {
                        notification.style.backgroundColor = 'var(--bg-secondary)';
                        notification.style.color = 'var(--text-primary)';
                        notification.style.border = '1px solid var(--border)';
                    }
                    
                    notification.textContent = message;
                    document.body.appendChild(notification);
                    
                    // Remove notification after animation
                    setTimeout(() => {
                        notification.remove();
                    }, 3000);
                }
            

                // Drawing handlers
                function setupDrawingHandlers() {
                    document.querySelectorAll('.page-container').forEach(container => {
                        container.addEventListener('mousedown', (e) => {
                            if (elements.addTextModal.style.display === 'none' && 
                                document.querySelector('.page-container').style.cursor === 'crosshair') {
                                e.preventDefault();
                                state.isDrawing = true;
                                state.startX = e.clientX - container.getBoundingClientRect().left;
                                state.startY = e.clientY - container.getBoundingClientRect().top;
                                
                                elements.drawingBox.style.left = `${state.startX}px`;
                                elements.drawingBox.style.top = `${state.startY}px`;
                                elements.drawingBox.style.width = '0px';
                                elements.drawingBox.style.height = '0px';
                                elements.drawingBox.style.display = 'block';
                                state.currentPageContainer = container;
                            }
                        });
                        
                        container.addEventListener('mousemove', (e) => {
                            if (!state.isDrawing) return;
                            const currentX = e.clientX - container.getBoundingClientRect().left;
                            const currentY = e.clientY - container.getBoundingClientRect().top;
                            
                            elements.drawingBox.style.left = `${Math.min(state.startX, currentX)}px`;
                            elements.drawingBox.style.top = `${Math.min(state.startY, currentY)}px`;
                            elements.drawingBox.style.width = `${Math.abs(currentX - state.startX)}px`;
                            elements.drawingBox.style.height = `${Math.abs(currentY - state.startY)}px`;
                        });
                        
                        container.addEventListener('mouseup', (e) => {
                            if (!state.isDrawing) return;
                            state.isDrawing = false;
                            state.endX = e.clientX - state.currentPageContainer.getBoundingClientRect().left;
                            state.endY = e.clientY - state.currentPageContainer.getBoundingClientRect().top;
                            
                            if (Math.abs(state.endX - state.startX) > 10 && Math.abs(state.endY - state.startY) > 10) {
                                elements.addTextModal.style.display = 'block';
                            } else {
                                elements.drawingBox.style.display = 'none';
                                showNotification('Please draw a larger box', 'info');
                            }
                        });
                    });
                }
            

                // Add CSS for notification animations
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes fadeOut {
                        from { opacity: 1; }
                        to { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
                
                // Start the application
                loadTheme();
                init();
                setupDrawingHandlers();
            
            </script>
        </body>
        </html>